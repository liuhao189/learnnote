# 进入/离开&列表过渡

Vue在插入、更新或移除DOM时，提供多种不同方式的应用过渡效果。

1、在CSS过渡和动画中自动应用class。

2、可以配合使用第三方CSS动画类，如Animate.css

3、在过渡钩子函数中使用JS直接操作DOM

4、可以配合使用第三方JS动画库，如Velocity.js

## 单元素/组件的过渡

Vue提供了transition的封装组件，可以给任何元素和组件添加进入/离开过渡。

1、条件渲染，条件展示，动态组件，组件根节点。

当插入或删除包含在Transition组件中的元素时，Vue将会做以下处理：

1、自动嗅探目标元素是否应用了CSS过渡或动画，如果是，在恰当的时机添加/删除CSS类名。

2、如果过度组件提供了JS钩子函数，这些钩子函数将在恰当的时机被调用。

3、如果没有找到JS钩子并且也没有检测到CSS过度/动画，DOM操作在下一帧立即执行。

# 过渡的类名

在进入/离开的过渡中，会有6个class切换。

1、v-enter，定义进入过渡的开始状态，元素被插入之前生效，元素被插入之后的下一帧移除。

2、v-enter-active，定义进入过渡时的状态，在整个进入过渡的阶段中应用，元素被插入之前生效，过渡/动画完成之后移除，可以定义进入过渡的过程时间，延迟和曲线函数。

3、v-enter-to，定义进入过渡的结束状态，元素被插入之后下一帧生效，过渡/动画完整之后移除。

4、v-leave，离开过渡的开始状态，离开过渡被触发时立刻生效，下一帧被移除。

5、v-leave-active，定义离开过渡生效时的状态，整个离开过渡的阶段中应用，过渡完成之后立刻移除。

6、v-leave-to，离开过渡的结束状态，离开过渡下一帧生效，过渡/动画完成之后移除。

    enter,leave两个大状态。CSS动画主要依赖CSS数字属性变化，进入时添加类，马上添加另一个类&&过渡属性类，过渡完成后删除。

## CSS动画

CSS动画用法同CSS过渡，区别在于动画中v-enetr类名在节点插入DOM后不会立即删除，而是在animationend事件触发时删除。

## 自定义过渡的类名

可以通过以下特性来自定义过渡类名

enter-class，enter-active-class，enter-to-class，leave-class，leave-active-class，leave-to-class。优先级高于普通的类名，对于Vue的过渡系统和其他第三方CSS动画库，如Animate.css结合使用十分有用。

## 同时使用过渡和动画

Vue需要知道过渡的完成，必须设置相应的事件监听器。可以是tranitionend或animationend，这取决于给元素应用的CSS骨子额。如果要给一个元素同时设置两种过渡动效，必须使用type特性并设置animation或transition来明确什么你需要Vue监听的类型。

## 显性地过渡时间

默认情况下，Vue会等待其在过渡效果的根元素的第一个transitionend或animationend事件。我们可以拥有一个精心编排的过渡效果，嵌套的内部元素相比于过渡效果的根元素有延迟或更长的过渡效果。

可以使用duration属性定制一个显性地过渡持续时间。

也可以定制进入和移出的持续时间。

## JS钩子

可以在属性中声明JS钩子

当只用JS过渡的时候，在enter和leave中必须使用done进行回调，否则，它们将被同步调用，过渡会立即完成。

推荐对于仅使用JS过渡的元素添加:css="false"，vue会跳过CSS的检测，避免过渡过程中的CSS的影响。

## 初始渲染的过渡

可以通过appear特性设置节点在初始渲染的过渡。也可以自定义CSS类名。或自定义JS钩子。
