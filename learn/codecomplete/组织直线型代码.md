# 组织直线型代码

从以数据为中心的编程观点转到以语句为中心的观点上，介绍最简单的控制流，按先后顺序放置语句和语句块。代码上的一些微妙之处还是会对代码的质量，正确性，可读性和可维护性带来影响。

## 必须有明确顺序的语句

前后语句之间的依赖关系明显地从子程序名中看出来。如果语句之间存在依赖关系，并且这些关系要求你把语句按照一定的顺序加以排列，那么请设法使得这些依赖关系变得明显。

设法组织代码，使依赖关系变得非常明显。使子程序名能突显依赖关系。

利用子程序参数明确显示依赖关系。子程序之间没有传递任何数据，不知道有哪些子程序使用了相同的数据。也可以用数据表明执行顺序并不重要。

用注释对不清晰的依赖关系进行说明。首先要尽力写没有顺序依赖关系的代码，其次尽力写依赖关系明显地代码。担心某一依赖关系不够清楚，那么就用文档说明它。

用断言或错误处理代码来检查依赖关系。如果代码非常重要，可以用状态变量以及错误处理代码或断言来对关键的顺序依赖关系做出说明。这种技术引入了一些新变量，新初始化代码和新错误处理代码，所有这一切都增加了出错的可能性。应该在由此获得的好处和由此带来额外复杂度之间作出权衡。

## 顺序无关的语句

缺少执行顺序依赖关系的时候，你可以用第二标准来判读语句或者代码块的顺序。其中的指导原则就是就近原则。

### 使代码易于自上而下地阅读

一条普遍性原则，要让程序易于自上而下地阅读，而不是让读者的目光跳来跳去。每一个对象的引用都放在一起，把它们局部化了，对象存活的代码行数非常少。

### 把相关的语句组织在一起

相关语句是因为它们都处理了相同的数据，执行了相似的任务，或者具有某种执行顺序上的依赖关系。可以这些关联度很强的语句重构成独立的子程序。

## 要点

组织直线型代码的最主要原则是按照依赖关系进行排列。

可以用好的子程序名，参数列表，注释，以及内部管理变量来让依赖关系变得更明显。

如果代码之间没有顺序依赖关系，设法使相关的语句尽可能地接近。



