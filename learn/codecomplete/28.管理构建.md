# 管理构建

# 鼓励良好的编码实践 

由于代码是构建活动最主要的产出，因此，管理构建中的一个关键问题就是如何鼓励良好的编码实践。

如果项目中有人要制定标准，那么应该由一位受人尊敬的架构师来做，而不应该由管理者来做。在软件项目中，专家级起的作用至少与管理层相同。

## 设定标准的考虑事项

标准对于有些组织非常有用，而对于其它组织则用处不大。一些程序员很乐意接受标准，因为标准有助于减少项目中随意出现的诸多分歧，如果你的团队反对采用严格标准，那么可以考虑一些其它的选择。灵活的指导原则，一些建议，一组能够表现最佳实践的例子。

## 鼓励良好的编码实践的技术

1、给项目的每一部分分派两个人，至少有两个人认为这段代码是能工作的，而且是可读的。

2、逐行复查代码，代码复查通常包括程序员本人和至少两名评审员。为原程序员离开项目这一情况提供一层安全保障外，复查还能改善代码的质量。

3、要求代码签名，其它领域里，技术图纸是由管理工程师来认可和签字的。一经签字就表明，该工程师所知的这些图纸在技术上是可行的并且没有错误。

4、安排一些好的代码示例供人参考，优良管理的一个重要方面就是清楚地表达你的目标。

5、强调代码是公有财产，程序员有时会认为他写的代码是他自己的代码，就像私有财产一样。

6、奖励好代码，运用你所在机构的奖励机制来激励良好的编码实践。所给予的奖励应该是程序员想要的；只有非常出色的代码才应得到奖励；一份简单的标准。

# 配置管理

软件项目是不断变化的，代码在变，设计在变，需求也在变。而且需求的变化会引起设计上的更多变化，设计上的变化又会引起代码和测试用例的更多得变化。

## 什么是配置管理

配置管理是系统化地定义项目工件和处理变化，以使项目一直保持其完整性的实践活动。

如果不对需求变更加以控制，会为系统中某些最终会被去除的部件编写代码，也会写出一些可能与系统中新的部件不兼容的代码。

如果不对代码变更加以控制，可能会修改某个别人也正在修改的子程序，测试代码是旧的。

## 需求变更和设计变更

1、遵循某种系统的变更控制手续，通过建立一套系统化的手续，你就能将变更放在对系统整体最为有利的环境下进行考虑。

2、成组地处理变更请求，人们倾向于一有想法就去实现那些较容易的变更。记下所有的想法和建议，不管它实现起来有多容易。有时间时，把它当做整体来看待。

3、评估每项变更的成本，你的客户，你的老板或者你自己想要修改系统的时候，请评估做这些修改所需花费的时间。

4、堤防大量的变更需求，变更请求的数量太大仍然是一个很关键的警报信号，它表明需求，架构或者上层设计做的不够好，从而无法有效地支持构建活动。

5、成立变更控制委员会或类似机构，收到变更请求时评估优先级。

6、警惕官僚主义，但也不要因为害怕官僚主义而排斥有效的变更控制。变更控制的实质就是确定什么最重要。

## 软件代码变更

1、版本控制软件，优良的版本控制软件用起来很轻松。有些版本控制软件需要先check out(仅允许单人)，然后再check in。

别人正在修改某一文件的同时，你修改的这个文件不会和他发生冲突。

你能方便地将机器上的全部项目文件的副本更新到当前版本。

可以回溯到任何文件的任意版本。

任何文件的更改的清单。

提供了安全保障。

## 工具版本

对于某种种类的项目而言，需要有重新构造出创建软件的各个特定版本的原样环境的能力，包括编译器，链接库，代码库等，需要把这些工具也都纳入版本控制之中。

## 机器配置

很多公司都因创建了标准的开发机器配置而受益。磁盘镜像技术。避免因为配置略有不同，或者使用工具版本不同等等原因造成的许多麻烦。

## 备份计划

定期备份你的工作，除了源代码以外，还应该备份你项目中的所有重要资料。试着做一份数据恢复演习。

# 评估构建进度表

评估项目的规模和完成项目所需的工作量是软件项目管理中最具挑战性的方面之一。

## 评估的方法

可以采取以下几种方法来评估项目的规模和完成它所需要地工作量。1、使用评估软件；2、使用算法方法；3、聘请外界的评估专家来评估有关项目；4、评估项目的每一部分，然后把它们加起来；5、让成员评估各自的任务，然后再把各任务的评估值加起来；6、参考以往项目的经验（保留以往项目的评估，查看其准确度，用它来调整新的评估）。

建立目标，评估构建活动还是评估所有的开发活动，需要什么样的评估准确度。

为评估留出时间，并且做出计划，花时间把评估当作一个迷你项目来做。

清楚地说明软件需求，在评估之前先定义需求，或者计划出一个预估过程。

在底层细节层面进行评估，你评估得越详细，你的评估结果就会越准确。

使用若干不同的评估方法，并且比较其结果。

定期重新评估，软件项目的一些因素会在最初评估后有所变化，因此要计划好定期进行重新评估。

## 评估构建的工作量

构建能给项目进度造成多大范围的影响，部分地取决于构建在项目中所占的比例。构建可以理解为详细设计，编码与调试、单元测试等。

构建所占比例会随着项目以及组织机构的不同而不同。

## 对进度的影响

对软件项目进度影响最大的是所开发的程序的规模。以下是一些能影响软件开发进度，但不易被量化的因素。

1、需求开发者的经验和能力

2、程序员的经验和能力

3、团队的动力

4、管理的质量

5、重用的代码数量

6、人员流动性

7、需求变更

8、客户关系的质量

9、用户对需求的参与度

10、客户对此类应用软件的经验

11、程序员对需求开发的参与程度

12、计算机、程序和数据的分级安全环境

13、文档量

14、项目目标，质量，可用性，进度以及其它可能的目标

## 评估与控制

一旦你确定了交付日期和产品规格书，剩下的主要问题就是如何控制人员和技术资源的开销，以便能按时交付产品。

## 如果落后了该怎么办

增加时间可行的话，那就增加时间。否则，采取以下解决方案。

1、希望自己能赶上，通常人们希望在编码和测试阶段把时间补回来，越接近项目后期，延误和超支的现象就越严重，项目并不能在后期把时间补回来，而是会越来越落后。

2、扩充团队，新手需要先花时间熟悉项目，然后才能发挥出生产率，培训也会占用已有人员的时间。会导致项目交流的复杂度和数量也增加。一位妇女可以怀胎十月生下一个孩子，并不意味着10位妇女能用一个月时间生下一个孩子。一个项目中的任务不可分割，不能各个击破，那么增加人手是无济于事的。如果任务可以分割，可以将它进一步分细，然后分配给不同的人来做。

3、缩减项目范围，去掉一个特性，你就除去了相应的设计、编码、调试、测试和编写文档工作。你也删除了该特性和其它特性之间的接口。最初做产品计划的时候，要把产品的功能划分为“必须用”，“有了更好”和“可选择”三类。

如果不能完整地去掉某项特性，那么还可以提供一个该功能的简化版本。

重新评估实现那些非重要特性的开发时间。

# 度量

1、任何一种项目特征都是可以用某种方法来度量的，而且总会比根本不度量好得多。度量结果也许不会完全精确，度量也许很难做，而且也需要持续得改善，但是它能使你对软件开发过程进行控制，而如果不度量就根本不可能控制。

如果有些数据要用于科学实验，那么就必须进行量化。

2、留下度量的副作用，度量会对动机产生影响，人们会对那些被度量的事务更加用心，认为度量的目标是在评价他们。忽视未被度量的工作。

3、反对度量就是认为最好不要去了解项目中到底在发生什么。你在度量项目的某个环节时，你会获得一些前所未有的认识。

规模，编写的代码总行数，注释总行数，类或子程序的总数，数据声明的总数，空行总数。

整体质量，缺陷总数，每个类或子程序的缺陷数，每千行代码的平均缺陷数，两次系统失灵之间的平均时间，编译器检测到的错误数量

缺陷跟踪，每个缺陷的严重级别，每个缺陷的位置，每个缺陷的根源(需求，设计，构造，测试)，更正每个缺陷的方法，每个缺陷的责任人，更正缺陷的代码行数，花费的时间；找出缺陷的平均时间，更正每一个缺陷的平均用时；

可维护性，每个类的public子程序数量；传给每个子程序的参数数量；每个类的private子程序或private变量的数量。每个子程序使用的局部变量的数量。。。。

生产率，项目花费的工作小时数，每个类或子程序花费的工作小时数，每个类或子程序的修改次数，项目花费的钱数，每行代码花费的钱数，每个缺陷花费的钱数。

可以使用当前已有的软件工具类获得这其中的大多数度量数据。

从一组简单的度量数据开始，比如缺陷数量，工作月数，总费用以及代码总行数。在你项目范围内为这些度量进行标准化，然后加以精化，随着你对希望度量什么的理解的进展加入一些新的度量内容。

确认你收集的数据是有理由的，制定目标，确定为了实现这一目标需要问哪些问题，然后再做度量，以此回答这些问题。

# 把程序员当人看

由于编程活动的抽象性，人们提倡更自然的办公环境以及合作者之间的充分交流。

## 程序员怎样花费时间

程序员不仅在编程上花时间，也要花事件去开会、培训、阅读邮件以及纯粹思考。

## 性能差异和质量差异

不同程序员在天分和努力程度方面的差别十分巨大，这一点与其它所有领域都一样。最顶尖的20%人员的产出占全部的50%，这一研究结果给予对生产率数据的分析。

具体到编程领域，在编写的程序的质量、编写的程序的大小以及程序员的生产率等方面，最好的与最坏的都有着一个数量级的差异。

## 个体差异

平均工作经验7年的专业程序员进行了调查，并未发现程序员的经验与其代码质量或生产率之间有什么关联。

## 团队差异

不同的编程团队在软件质量和生产率上也存在着相当大的差异。好的程序员倾向于聚集在一起，差的程序员也是一样。

对于招聘和录用来说是非常清晰的，最优秀的程序员需要多支付报酬，那么就请欣然接受这一现实。其它程序员的品质和生产力也会上升。

## 信仰问题

试图要求统一某些编程实践，那么可能会激怒你的程序员。

1、编程语言

2、缩进风格

3、大括号的摆放位置

4、所用的集成开发环境

5、注释风格

6、效率与可读性的取舍

7、对方法的选择-scrum，极限编程，渐进交付

8、编程工具

9、命名习惯

10、对goto的使用

11、对全局变量的使用

12、度量，特别是有关生产力的度量，eg每天编写的代码行数

共同特征是，每一项都是程序员个人风格的反映，如果你认为有必要控制程序员的某些信仰，请考虑这些要点。

要清楚地知道你是在处理一个敏感的问题

对这些领域要使用建议或者指导原则，避免制定僵硬的规则或标准。

避免流露明显的意图。

让程序员制定它们自己的标准。特定标准的细节往往没有存在某个标准重要。坚持让他们在那些对你来说非常重要的领域里标准化。

## 物理环境

物理环境对生产率有着巨大的影响。投入比强征暴敛更有助于提高生产率。

# 管理你的管理者

在软件开发中，非技术出身的管理者随处可见，具有技术经验但却落后于这个时代10年的管理者也比比皆是。技术出色并且其技术与时俱进的管理者实属凤毛麟角。

管理你的管理者意味着，你需要告诉他应该这样做而不应该那样做。要诀在于你要表现得使你的管理者认为他仍然在管理你。

1、把你希望做什么的念头先藏起来，等着你的管理者组织一场有关你希望什么的头脑风暴/集体讨论

2、把做事情的正确方法传授给你的管理者，这是一项需要持之以恒的工作。因为管理人员经常会被提升，调迁或者解聘。

3、关注你的管理者的兴趣，按照他的真正意图去做，而不要用一些不必要的实现细节来分散其注意力。

4、拒绝按照你的管理者所说的去做，坚持用正确的方法做自己的事。

5、换工作。

# 要点

1、好的编码实践可以通过 贯彻标准或者 使用更为灵活的方法来达到。

2、配置管理，如果应用得当，会使程序员的工作变得更加轻松。特别包括变更控制。

3、好的软件评估是一项重大挑战，成功的关键包括采用多种方法，随着项目的开展而修正评估结果，以及很好地利用数据来创建评估等。

4、度量是构建管理成果的关键，你可以采取措施度量项目的任何方面，而这要比根本不度量好很多。准确的度量是制定准确的进度表，质量控制和改进开发过程的关键。

5、程序员和管理人员都是人，把他们当人看的时候工作得最好。


