## 解决内存问题

了解如何使用Chrome和DevTools查找影响页面性能的内存问题，包括内存泄漏，内存膨胀和频繁的垃圾回收。

1、使用Chrome的任务管理器了解您的页面当前正在使用的内存量

2、使用Timeline记录可视化一段时间内的内存使用。

3、使用堆快照确定已分离的DOM树，内存泄漏的常见原因。

4、使用分配时间线记录了解新内存在JS堆中的分配时间。

## 概览

内存问题至关重要，因为这些问题经常会被用户察觉。用户可通过以下方式察觉内存问题。

1、页面的性能随着时间的延长越来越差。

2、页面的性能一直很槽糕，内存膨胀的的症状，页面为达到最佳速度而使用的内存比本应使用的内存多。

3、页面出现延迟或经常暂停，这可能是频繁垃圾回收的症状。垃圾回收是指浏览器收回内存。回收期间、所有脚本执行都将暂停。

## 内存膨胀：如何界定过多

RAIL模型并以用户为中心。了解什么设备在您的用户中深受欢迎，然后在这些设备上测试您的页面。

## Chrome任务管理器实时监视内存使用

任务管理器是一个实时监视器，告诉您页面当前正在使用的内存量。

Memory列表示原生内存。DOM节点存储在原生内存中。

JS Memory列表示JS堆，实时数字表示您的页面上的可到达对象正在使用的内存量。

## 使用Performance记录可视化内存泄漏

 节点计数器您会看到它与代码完全匹配。

 JS 堆大小或节点大小不断增大的模式，则可能存在内存泄漏。

 ## 使用堆快照发现已分离DOM树的内存泄漏

 只有页面的DOM树，或JS代码不再引用DOM节点时，DOM节点才会被作为垃圾进行回收。

 如果某个节点已从DOM数移除，但某些JS仍然引用它，我们称此节点为已分离。

 ## 使用分配时间线确定JS堆内存泄漏

 分配时间线是您可以用于跟踪 JS 堆中内存泄漏的另一种工具。这些蓝色竖线表示新内存分配。

 ## 按函数调查内存分配

 分配了最多内存的函数显示在最上方。

 ## 发现频繁的垃圾回收

 如果感觉页面经常暂停，则可能存在垃圾回收问题。

您可以使用 Chrome 任务管理器或者 Timeline 内存记录发现频繁的垃圾回收。 在任务管理器中，Memory 或 JavaScript Memory 值频繁上升和下降表示存在频繁的垃圾回收。在 Timeline 记录中，JS 堆或节点计数图表频繁上升和下降指示存在频繁的垃圾回收。