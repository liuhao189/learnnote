# 基本数据类型

基本数据类型是构建其它所有数据类型的构造块，本章包含了使用数，整数，浮点数，字符和字符串，布尔变量，枚举类型，具名常量以及数组的一些技巧。

## 数值概率

避免使用神秘数值，神秘数值是在程序中出现的，没有经过解释的数值文字量。具名常量或全局变量。优点：修改会变得更可靠；修改会变得更容易；代码变得更可读。

如果需要，可以使用硬编码的0和1，数值0和1用于增量，减量和从数组第一个元素开始循环。程序主题中仅能出现的文字量就是0和1，任何其它文字量都应该换成更有描述性的表示。

预防除零错误，每次使用除法符号的时候，都要考虑表达式的分组是否可能为0。

使类型转换变得明显，确认当不同数据类型之间的转换发生时，阅读你代码的人会注意到这点。不同的编译器会执行不同的转换。

避免混合类型的比较，自己动手进行类型转换。

注意编译器的警告，当你在同一表达式中使用了多种类型的数值的时候，很多现代的编译器都会通知你。

## 整数

检查整数除法，使用整数的时候，7/10不一定等于.7。

检查整数溢出，做整数乘法或加法的时候，你要留心可能的最大整数。

检查中间结果溢出。

## 浮点数

使用浮点数时主要考虑的是，很多十进制小数不能精确地用数字计算机中的1和0来表示。

避免数量级相差巨大的数之间的加减运算，必须把一系列差异如此巨大的数相加，那么就先对这些数排序，然后从最小值开始把它们加起来。

避免等量判断，很多应该相等的浮点数并一定相等。先确定可接受的精确度范围，然后用布尔函数判断数值是否足够接近。

处理舍入误差问题，由于舍入误差而导致的错误与由于数字之间数量级差太大而导致的错误并无二致。换用精确度更高的变量类型；换用二进制编码的十进制CD；把浮点变量变成整型变量；

检查语言和函数库对特定数据类型的支持，包含了像Currency这样的数据类型，专门处理对舍入敏感的数据。

