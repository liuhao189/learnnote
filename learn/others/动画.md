动画是使网络应用和网站吸引人的重要因素。用户希望有快速响应和高度交互的用户界面。

1、使用动画方式给项目增加活力

2、动画应支持用户交互

3、要小心选择您为其设置动画的属性，有些属性比其它属性开销更大。

## 选择合适的内容来设置动画

出色的动画可增添一层乐趣，增加项目对用户的吸引力，可以将您喜欢的所有内容设置动画。

卡顿或选择不当的动画可能对用户体验产生负面影响，因此动画需要高性能并且恰当。

## 使用动画来支持交互

要有策略地放置动画以增强用户交互。避免不必要地打断或妨碍用户活动的动画。

## 避免为开销大的属性设置动画

唯一比放置不当的动画更糟的事情是导致页面卡顿的动画。某些属性做出改变所花费的开销比其他属性要多，因此更可能使动画卡顿。

## CSS VS JS

在网页上创建动画有两种主要方法：使用 CSS 和使用 JavaScript。

1、使用 CSS 动画来实现较简单的“一次性”转换，例如切换 UI 元素状态。

2、当您需要高级效果（例如弹跳、停止、暂停、倒退或减速）时，请使用 JavaScript 动画。

3、如果选择使用 JavaScript 来编写动画，可选用 Web Animations API 或用起来顺手的现代框架。


指导原则：

1、当您为 UI 元素采用较小的独立状态时，使用 CSS。

2、在需要对动画进行大量控制时，使用 JavaScript。

3、如果您需要手动协调整个场景，可直接使用 requestAnimationFrame

## 使用CSS编写动画

使用 CSS 编写动画是使内容在屏幕上移动的最简单方式。此方法被称为声明式，因为您可以指定您想要的结果。

还可以使用 CSS 动画，这允许您对单个动画关键帧、持续时间和迭代进行更多控制。

## 使用 JavaScript 和 Web Animations API 编写动画

使用 JavaScript 创建动画比编写 CSS 变换或动画更复杂，但它一般可为开发者提供更多功能。

JavaScript 动画是命令式，因为您将它们作为代码的一部分嵌入代码中。

Web Animations 仅修改元素的呈现形式。如果您想让您的对象保持在它已移动到的位置，则应在动画完成时，需要修改其底层样式。

## 缓动的基础知识

自然界中没有东西是从一点呈线性地移动到另一点。现实中，物体在移动时往往会加速或减速。我们的大脑习惯于期待这种运动，因此在做动画时，应利用此规律。自然的运动会让用户对您的应用感觉更舒适，从而产生更好的总体体验。

1、缓动使您的动画感觉更自然。

2、为 UI 元素选择缓出动画。

3、避免缓入或缓入缓出动画，除非可以使其保持简短；这类动画可能让最终用户觉得很迟钝。

## 缓动关键字

CSS关键字：linear、ease-in、ease-out、ease-in-out。

## 线性动画

动画内容往往显得很僵硬，不自然，让用户觉得不协调。一般来说，应避免线性运动。

## 缓出动画

缓出使动画在开头处比线性动画更快，还会在结尾处减速。

缓出一般最适合界面，因为开头时快速使动画有反应快的感觉，同时在结尾仍允许有一点自然的减速。

## 缓入动画

从交互的角度来看，缓入可能让人感觉有点不寻常，因为结尾很突然；在现实中移动的物体往往是减速，而不是突然停止。缓入还有让人感觉行动迟缓的不利效果，这会对网站或应用的响应速度给人的感觉产生负面影响。

## 缓入缓出动画

由于缓入开头让动画有迟钝感，因此动画持续时间不要过长。300-500 毫秒的时间范围通常比较合适，但实际的数量主要取决于项目的感觉。也就是说，由于开头慢、中间快和结尾慢，动画将有更强的对比，可能让用户感到非常满意。

## 自定义缓动

可以定义自己的曲线（或公式），这让您能更好地控制项目动画的感觉。

1、自定义缓动使您能够给项目提供更多个性。

2、您可以创建与默认动画曲线（缓出、缓入等）相似的三次贝塞尔曲线，只是重点放在不同的地方。

3、当需要对动画时间和行为（例如弹性或弹跳动画）进行更多控制时，请使用 JavaScript。

这些贝塞尔曲线有四个值，即 2 对数字，每对数字描述三次贝塞尔曲线的控制点的 X 和 Y 坐标。贝塞尔曲线的起点坐标为 (0, 0)，终点坐标为 (1, 1)；由您设置两个控制点的 X 和 Y 值。两个控制点的 X 值必须在 0 到 1 之间，每个控制点的 Y 值可以超过 [0, 1] 限制，但此规范未说明可超过多少。

## 使用 JavaScript 框架实现更多控制

如果您需要弹跳的感觉，您可以考虑使用 JavaScript 框架，因为使用 CSS 或 Web Animations 很难实现这个效果。

GreenSock 的 TweenMax（或 TweenLite，如果您想要超轻量版本）是一个强大的框架，您可以在小型 JavaScript 库中获得很多控制，它是一个非常成熟的代码库。

## 在视图之间设置动画

常常需要让用户在应用的各视图之间切换。在这些视图之间设置动画可以吸引用户，并让您的项目更生动活泼。

1、使用变换来切换不同视图；避免使用left、top或任何其它会触发布局的属性。

2、确保使用的所有动画简洁明快，并且设置较短的持续时间。

3、考虑在屏幕尺寸增大时您的动画和布局如何变化；考虑哪些适合小屏幕的动画用在桌面环境时可能看起来很怪。

左右平移，实现此效果，您需要一个容纳这两个视图的容器，并为容器设置overflow:hidden。

## 确保动画在较大屏幕上正常显示

对于较大屏幕，始终应让列表视图留在周围，而不是将其移除，并且从右侧滑入详情视图。它与处理导航视图几乎一样。

## 选择合适的缓动

1、为 UI 元素使用缓出动画；Quintic(cubic-bezier(0.23, 1, 0.32, 1)) 缓出是一个非常好（虽然比较快速）的缓动。

2、一定要注意使用动画持续时间；缓出和缓入应为 200 毫秒 - 500 毫秒，而弹跳和弹性缓动的持续时间应更长，为 800 毫秒 - 1200 毫秒。

如果您的项目不是为了追求乐趣，那么就无需使元素在 UI 周围进行弹跳。相反，如果您将要创建一个轻松欢乐的网站，那么请务必使用弹跳！

## 选择合适的动画持续时间

给项目添加的任何动画均须有正确的持续时间。若太短，动画让人感觉有攻击性和突然；若太长，则让人觉得很卡和讨厌。

1、缓出：约 200 毫秒 - 500 毫秒。这让眼睛有机会看到动画，但不会觉得卡顿。

2、缓入：约 200 毫秒 - 500 毫秒。请记住，它在结尾将晃动，没有时间量变化将缓和这种影响。

3、弹跳或弹性效果：约 800 毫秒 - 1200 毫秒。您需要留出时间让弹性或弹跳效果“停下”。若没有这点额外时间，动画的弹性跳动部分看上去比较有攻击性，让人感觉不舒服。

当然，这些只是指导原则。用您自己的缓动做试验，然后选择觉得适合于项目的缓动。

## 给模态视图设置动画

模态视图用于重要消息，并且您有很好的理由来阻止用户界面。应谨慎使用模态视图，因为它们具有破坏性，如果过度使用，会很容易破坏用户体验。但是，在某些情况下，它们是适合使用的视图，并且加上一些动画将使其变得生动。

1、应谨慎使用模态视图；如果不必要地打断用户的体验，他们会感到失望。

2、给动画加上缩放可实现不错的“掉落”效果。

3、当用户关闭模态视图时，应迅速将其清除。但是，应让模态视图以较慢的速度进入屏幕，以防使用户感到突然。

## 不对称的动画定时

不对称的动画定时可让您在表达个性的同时快速响应用户交互，从而提升用户体验。还能使感觉出现对比，使界面在视觉上更吸引人。

1、使用不对称的动画定时为作品添加个性和对比效果。

2、务必有利于用户交互；当响应点按或点击时采用较短的持续时间，其他情况则可以留出较长的持续时间。

经验法则是始终快速响应用户交互。也就是说，大多数时候用户操作是不对称的，因此动画也可以不对称。

对于用户交互触发的 UI 动画，例如视图变换或显示元素，采用快速前奏（短持续时间）和慢速结尾（较长持续时间）。

对于由代码触发的 UI 动画，例如错误或模态视图，采用较慢前奏（较长持续时间）和快速结尾（短持续时间）。

## 动画与性能

在设置动画时应保持60fps，因为任何卡顿或停顿都会引起用户注意，并对其体验产生负面影响。

1、注意您的动画不能导致性能问题；确保了解对指定 CSS 属性设置动画的影响。

2、改变页面（布局）结构或导致绘图的动画属性特别消耗资源。

3、尽可能坚持改变变形和透明度。

4、使用 will-change 来确保浏览器知道您打算对什么设置动画。

给属性设置动画不是不受约束的，不过，给某些属性设置动画的开销比其他属性要小。

例如，给元素的 width 和 height 设置动画会改变其几何形状，并且可能导致页面上的其他元素移动或改变大小。此过程称为布局，如果页面有很多元素，则可能开销很大。每当触发布局时，页面或其一部分通常需要进行绘制，这一般比布局操作本身更消耗资源。

应尽可能避免给触发布局或绘制的属性设置动画。对于大部分现代浏览器，这意味着将动画限制为 opacity 或 transform，两种都可经浏览器高度优化；动画是由 JavaScript 还是由 CSS 处理并不重要。

## 使用 will-change 属性

使用 will-change 来确保浏览器知道您打算改变元素的属性。这使浏览器能够在您做出更改之前进行最合适的优化。

一般经验法则是，如果动画可能在接下来的 200 毫秒内触发（由用户交互触发或由应用的状态触发），则对动画元素使用 will-change 是个好主意。

## CSS VS JS的性能

1、基于 CSS 的动画以及原生支持的网络动画通常由一个名为“合成器线程”的线程处理。这不同于在其中执行样式、布局、绘制和 JavaScript 的浏览器“主线程”。这意味着，如果浏览器正在主线程上运行一些高开销任务，则这些动画可以继续运行而不中断。

2、在许多情况下，变形和透明度的其他更改还可由合成器线程来处理。

3、如果任何动画触发绘制、布局或同时触发这两者，则“主线程”将必须执行工作。这点同时适用于基于 CSS 和 JavaScript 的动画，并且布局或绘制的开销可能拖慢与 CSS 或 JavaScript 执行相关的任何工作，使问题变得无意义。
