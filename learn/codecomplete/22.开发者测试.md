# 开发者测试

测试是最常见的改善质量的活动，这种实践得到许多业界和学界研究，以及商业经验的支持。

单元测试，将一个完整的类，子程序或小程序，从完整的系统中隔离出来进行测试。

组件测试，将一个类、包、小程序或者其它程序元素，从一个更加完整的系统中隔离出来进行测试。这些被测试代码涉及到多个程序员或多个团队。

集成测试，对两个或更多的类，包，组件或者子系统进行的联合测试。

回归测试，重复执行以前的测试用例，以便在原先通过了相同测试集合的软件中查找缺陷。

系统测试，在最终的配置下运行整个软件，以便测试安全，性能，资源消耗，时序方面的问题，以及其它无法在低级集成上测试的问题。

开发者测试主要包括单元测试，组件测试和低级别集成测试。有时还会包括回归测试和系统测试。

测试通常分为两大类，黑盒测试和白盒测试。黑盒测试指的是测试者无法了解测试对象内部工作机制的测试。白盒测试指的是测试者清楚待测试对象内部工作机制的测试。

## 开发者测试在软件质量中的角色

测试的目标与其它开发活动背道而驰，测试的目标是找出错误。其它开发活动的目标是避免程序错误和软件的崩溃。

测试永远不可能彻底证明程序中没有错误。测试本身并不能改善软件的质量。

测试时要求你假设会在代码里面找到错误。

所有的测试应该占整个项目的50%的时间。开发者测试应该占整个项目的8%-25%之间，如果不包含调试，占用的时间会少一些。

测试结果用于评估正在开发的产品的可靠性，还可以用于指导对软件的修正。归纳出程序中最常见的错误的类型，选择适当的培训课程，指引今后的技术复查活动，设计未来的测试用例。

## 构建中测试

玻璃盒测试，除了观察它的输入输出，还要查看内部的源代码。知道盒子里面的情况，可以更彻底地测试这个类。

一部分同其它部分组合之前，都需要对它进行彻底的单元测试。独立进行子程序的测试不是一件容易的事情，但是单独调试它们，比集成之后再进行测试要简单得多。

## 开发者测试的推荐方法

对每一项相关的需求进行测试，以确保需求都已经被实现。对需求里面常见的疏漏进行测试。

对每一个相关的设计关注点进行测试，以确保设计已经被实现。

用基础测试来扩充针对需求和设计的详细测试用例。增加数据流测试，然后补充其它所需的测试用例，以便对代码进行彻底的考验。

使用一个检查表，其中记录着你在本项目迄今为止所犯的，以及在过去的项目中所犯的错误类型。

## 测试先行还是测试后行

首先编写测试用例，更早发现缺陷，更容易修正它们。写代码之前至少思考一下需求和设计。需求上的问题暴露出来。仍然可以最后再进行测试。

## 开发者测试的局限性

开发者测试倾向于干净测试，开发者往往去做一些检验代码能否工作的测试，而不是做所有可能让代码失效的测试。

开发者测试对覆盖率有过于乐观的估计，开发者坚信他们的测试覆盖率达到了95%。

开发者测试往往会忽略一些更复杂的测试覆盖率类型。100%分支覆盖率。

# 测试技术锦囊

## 不完整的测试

由于进行完全测试实际上是不可能的，测试的窍门就在于选择那些最有可能找到错误的测试用例。

## 结构化的基础测试

结构化的基础测试其实是一个相当简单的概念，其思想是，你需要去测试程序中的每一条语句至少一次。如果语句是一个逻辑语句，例如if语句或者while语句，需要根据if或者while中表达式的复杂程度来修改测试，以确保这个语句完全经过了测试。

代码覆盖测试或者逻辑覆盖测试，这是测试穿过程序里所有路径的两种方法。

所需基础测试用例的最少数量，可以通过下面的简单方法计算。

1、对通过子程序的直路，开始的时候记1。

2、遇到下面的每个关键字或其等价物时，加1，if，while，repeat，for，and以及or。

3、遇到每一个case语句加1，如果case语句每一条缺省情况，再加1。

## 数据流测试

控制流和数据流在计算机程序设计中的重要性部分伯仲。

数据使用的出错几率至少不亚于控制流，全部代码中至少有一般是数据声明和初始化。

数据状态：已定义；已使用；已销毁。已进入，控制流已经进入一个子程序；已退出，对变量产生影响之后，控制流立即退出子程序。

编写数据流测试用例的关键是要对所有可能的定义-使用路径进行测试，可以采用彻底程度不同的测试。

## 等价类划分

等价类划分的概念是这一想法的严格表达形式，应用它有助于减少所需用例的数量。

## 猜测错误

优秀的程序员会使用各种不太规矩的，启发式的方法去寻找它们代码中的错误。其中一种启发式方法就是猜测错误。猜测程序会在哪里出错的基础之上建立测试用例。

猜测可以基于直觉或者过去的经验。

## 边界值分析

边界条件进行测试最丰硕的战果之一就是off-by-one错误。边界值分析的思想就是写一些测试用例来测试边界值条件。

## 符合边界值

边界值分析也适用于允许的最大值最小值。

## 几类坏数据

数据太少，太多的数据，错误的数据情况，长度错误的数据，未初始化的数据。

## 几类好数据

正常的情况，最小的正常局面，最大的正常局面，与旧数据的兼容性。新程序或子程序替代旧版本的时候才需要进行。

## 采用容易手工检查的测试用例

简单数据容易脑算。

## 典型错误

你越了解你的对手-错误，你的测试就有可能做得更好。



