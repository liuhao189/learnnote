# 伪代码编程过程

## 创建类和子程序的步骤概述

创建一个类可以有多种不同的方式，但一般而言这都是一个迭代过程，先对一个类做总体设计，列出这个类内部的特定子程序，创建这些子程序，然后从整体上复查这个类的构建结果。

1、创建类的总体设计，设计一个类的过程中包含一些特有的设计任务，定义类的特定职责，定义类所要隐藏的秘密，以及精确地定义类的接口所代表的抽象概念。决定这个类是否要从其它类派生而来，以及是否允许其它类再从它派生，指出这个类中关键的公用方法，标识并设计出类所需用到的重要数据成员。

2、创建类中的子程序，需要创建主要子程序。

3、复审并测试整个类，整个类可以工作之后，应该再对其整体进行复查和测试，发现那些在子程序的独立测试层次上无法测出的问题。

### 创建子程序的步骤

设计子程序，检查设计，编写子程序的代码，检查代码。

## 伪代码

伪代码这个术语是指某种用来描述算法，子程序，类或完整程序的工作逻辑的，非形式的，类似于英语的记法。伪代码编程过程则是一种通过书写伪代码而更高效地创建程序代码的专门方法。

1、用类似英语的额语句来精确地描述特定的操作

2、避免使用目标编程语言中的语法元素。比代码本身略高的层次上进行设计。

3、在意图的层面上编写伪代码，用伪代码去描述解决问题的方法的意图。

4、在一个足够低的层次上编写伪代码，以便可以近乎自动地从它生成代码。

伪代码可以编程编程语言中的注释。

好处：

1、伪代码使得评审更容易，无须检查源代码就可以评审细节设计。

2、伪代码支持反复迭代精化的思想，从一个高层设计开始，把这一设计精化为伪代码，然后再把伪代码精化为源代码。

3、伪代码使变化更加容易。

4、伪代码能使代码做注释的工作量减到最少。

5、伪代码比其它形式的设计文档更容易维护。

## 通过伪代码编程过程创建子程序

### 设计子程序

一旦你明确了一个类有哪些子程序之后，为了创建类中较为复杂的程序，接下来要做的第一步工作就是设计它。

1、检查先决条件，查看一下该子程序要做的工作是不是已经定义好了，是不是能够与整体设计相匹配。

2、定义子程序要解决的问题，陈述出该子程序将要解决的问题，叙述要足够详细，以便能去创建这个子程序。这一子程序将要隐藏的信息；传给这个子程序的各项输入；从该子程序得到的输出；在调用程序之前确保有关的前条件成立；在子程序将控制权交回调用程序之前，确保其后条件的成立。

3、为子程序命名，好的子程序名是优秀子程序的标志之一。清晰的，无歧义的名字。

4、决定如何测试子程序，编写一个子程序的时候，要想一想怎么才能测试它。

5、在标准库中搜寻可用的功能，提高代码的质量和生产率，有一个最重要的途径就是重用好的代码。

6、考虑错误处理，考虑在子程序中所有可能出错的环节。程序架构中定义了出错处理策略，只需遵循这一策略即可，否则，必须针对特定的子程序确定最佳的出错处理方式。

7、考虑效率问题，效率并不是十分紧要，只要看看子程序的接口是否经过很好地抽象，看程序的代码是否易读。性能非常重要的场景，架构应当指明每个子程序有多少资源可使用，以及它们必须以多快的速度执行其操作。其它情况下，在每个子程序上为效率问题卖力通常是白费功夫，最主要的优化还是在于完善高层的设计。

8、研究算法和数据类型，从头开始编写一段复杂的代码之前，查一下算法书看看有什么可用的内容。

9、编写伪代码，上述步骤的主要目的是为你确立一个思路，后面可以开始用高层次的伪代码来写程序了。首先简要地用一句话来写下该子程序的目的，帮助你澄清对该子程序的理解。

10、考虑数据，对子程序所用的数据进行设计。主要的数据部分，关键的数据类型定义好，对于设计一个子程序的逻辑是很有用的。

11、检查伪代码，复查你写的伪代码。

12、在伪代码中试验一些想法，留下最好的想法。尽可能用伪代码去尝试更多的想法。

### 编写子程序的代码

一旦一个子程序已经设计好，就该来构建它了。可以按一种近乎标准化的顺序来实施子程序构建的各个步骤。

1、写出子程序的声明，写出子程序的接口声明。头部注释变为编程语言中的注释，把它保留在你写的伪代码的上方。

2、把伪代码转变为高层次的注释。

3、在每条注释下面填充代码，伪代码注释中的每一句话下面填入代码。

4、检测代码是否需要进一步分解，几行伪代码展开后形成大量的代码。把这段注释下面的代码重构成一个新的子程序。递归地应用伪代码编程过程。

### 检查代码

检查你所构建的代码是否正确。这一阶段留下的任何错误，只能到以后的测试阶段才能发现。代价昂贵。

1、在脑海里检查程序中的错误，确保检查到了所有可能的执行路径和所有异常条件。理解每一行代码所起的作用，理解为什么需要这行代码。只是写出一个可以工作的子程序是不够的，不知道它为什么可以工作，那就去研究它，讨论它，用其它的设计方案作实验，直到弄明白为止。

2、编译子程序，完成检查之后，就可以编译这个程序了。你自己详细一个子程序是正确时再编译它，可以避免在匆忙中完成代码。把编译器的警告级别调到最高，通过让编译器来检测错误，可以很容易地查出大量细微的错误；使用验证工具，可以通过使用类似lint这样的工具进行补充检查；消除产生错误消息和警告的所有根源。大量的警告信息按时着代码的质量欠佳，需要尽量理解所得到的每一个警告。

3、在调试器中逐行执行代码，编译通过之后，要在调试器中逐行执行，以确保每行代码都在按照你所期望的方式执行。

4、测试代码，使用你在开发该子程序期间计划写的或已写的测试用例来测试代码。

5、消除程序中的错误，一旦检测到错误，就一定要把它除掉。修修补补通常表明你还未能全面地理解程序。

### 收尾工作

优秀代码的一般特性来检查你的代码。

1、检查子程序的接口。确认所有的输入，输出数据都参与了计算，并且所有的参数也都用到了。

2、检查整体的设计质量。这个子程序只干了一件事情，并且把这件事情做得很好。子程序之间是松散耦合的，子程序采用了防御式设计。

3、检查子程序中的变量，检测是否存在不准确的变量名称，未被用到的对象，未经声明的变量，以及未经正确初始化的对象。

4、检查子程序的语句和逻辑，检测是否存在偏差1，死循环，错误的嵌套以及资源泄漏。

5、检查子程序的布局。使用空白来明确子程序，表达式及参数列表的逻辑结构。

6、检查子程序的文档，确认那些由伪代码转换而来的注释仍然是准确无误的。

7、出去冗余的注释。

### 根据需要重复上述步骤

迭代的过程，不要犹豫，把构建的工作再做一遍。

## 伪代码编程过程的替代方案

伪代码编程过程是创建类和子程序的最佳方法。其它专家推荐的一些不同的方法，可以用这些方法来替代伪代码编程过程，也可以把它们用作对伪代码编程过程的补充。


