# 变量名的力量

## 选择好变量名的注意事项

变量的好与坏就在很大程序上取决于它的命名的好坏。一个好的变量是可读的，易记的和恰如其分的。

### 最重要的命名注意事项

为变量命名时最重要的考虑事项是，该名字要完全、准确地描述出该变量所代表的事物。通常，对变量的描述就是最佳的变量名。

以问题为导向。一个好记的名字反映的通常都是问题，而不是解决方案。

最适当的名字长度。变量名的最佳长度应该介于1和30之间。太短的名字无法传达足够的信息，太长的名字很难写，同时也会使程序的视觉结构变得模糊不清。当变量名的平均长度在10到16个字符串的时候，调试程序所需花费的气力是最小的。查看自己写的代码时发现了很多更短的名字，那么你需要认真检查，确保这些名字含义足够清晰。

### 变量名对作用域的影响

变量名取得很短的时候，表示该变量代表的是一个临时的数据，它的作用域非常有限。较长的名字适用于很少用到的变量或者全局变量，而较短的名字则适用于局部变量或者循环变量。短的变量名常常会带来一些麻烦，作为一项防御式编程策略，一些细心的程序员会避免使用短的变量名。

对位于全局命名空间中的名字加以限定词，如果你在全局命名空间中定义了一些变量，考虑是否需要采用某种方式对全局命名空间进行划分，并避免产生命名冲突。

### 变量名中的计算值限定词

很多程序都有表示计算结果的变量。总额、平均值、最大值。限定词加到名字的最后。

这种方法具有很多优点，变量名中最重要的那部分，即为这一变量赋予主要含义的部分应当位于最前面。避免由于同时在程序中使用不同的方式。一致性可以提高可读性，简化维护工作。

把计算的量放在名字最后的这条规则也有例外。num放在变量名的开始位置代表一个总数，num放在变量名的结束位置代表一个下标。

### 变量名中的常用对仗词

对仗词的使用要准确，通常应用命名规则来提高对仗词的一致性，从而提高其可读性。

## 为特定类型的数据命名

为一些特定类型数据的命名还要求作出一些特殊的考虑。

### 为循环下标命名

i，j，k这些名字都是约定俗成的。由于代码会经常修改，扩充，或者复制到其它程序中去。出现循环的嵌套，使用了多个嵌套的循环，那么就应该给循环赋予更长的名字以提高可读性。

### 为状态变量命名

状态变量用于描述你的程序的状态。

为状态变量取一个比flag更好的名字，最好是把标记看作状态变量。标记应该用枚举类型，具名常量，或用作具名常量的全局变量来对其赋值。猜测某段代码的含义的时候，就该考虑未变量重新命名。

### 为临时变量命名

临时变量用于存储计算的中间结果，作为临时占位符，以及存储内存管理值。它们常被赋予temp，x或者其它一些模糊且缺乏描述性的名字。

警惕临时变量，大多数变量都是临时性的，可能表明你还没有弄清楚它们的实际用途。

### 为布尔变量命名

谨记典型的布尔变量名。

done，用done表示某件事情已经完成。循环结束或者一些其它的操作已完成。

error，用error表示有错误发生。

found，用found表明某个值已经找到了。

success或ok，用success或ok来表明一项操作是否成功。如果可以用一个更具体的名字代替success。

给布尔变量赋予隐含真假含义的名字，有些程序员喜欢在他们写的布尔变量名前加上is，变量名就变成了一个问题。
优点之一它不能用于那些模糊不清的名字，isStatus，这毫无意义。它的缺点之一是降低了简单逻辑表达式的可读性。

使用肯定的布尔变量名，不必写双重否定。

### 为枚举类型命名

在使用枚举类型的时候，可以通过使用组前缀。有些编程语言里，枚举类型的处理很像类，枚举成员也总是被冠以枚举名字前缀。

### 为常量命名

具名常量时，应该根据常量所表示的含义，而不是该常量所具有的数值为该抽象事物命名。

## 命名规则的理论

有些程序员会抵制标准和约定，并且有很好的理由，有些标准和约定非常刻板并且低效，它们会毁坏创造性和程序质量。

### 为什么要有规则

要求你更多地按规矩行事。通过做一项全局决策而不是做许多局部决策，你可以集中精力关注代码更重要的特征。

有助于在项目之间传递知识。名字的相似性能让你更容易，更自信地理解那些不熟悉的变量原本应该是做什么的。

有助于你新项目中更快速地学习代码。

有助于减少名字增生。在没有命名规则的情况下，会很容易地给同一个对象起两个不同的名字。

弥补编程语言的不足之处，可以用规则来仿效具名常量和枚举类型。

强调相关变量之间的关系。

规则的存在为你的代码增加了结构，减少了你需要考虑的事情。

### 何时采用命名规则

没有金科玉律表明何时应该建立命名规则。

当多个程序员合作开发一个项目时；当你计划把一个程序转交给另一位程序员来修改和维护的时候；当你所在的组织中的其它程序员评估你写的程序的时候；当你写的程序规则太大，以致于你无法在脑海里同时了解事情的全貌，而必须分而治之的时候；当你写的程序声明周期足够长，长到你可能会在把它搁置几个星期或几个月之后又重新启动有关该程序的工作时；在一个项目中存在一些不常见的术语，并且你希望在编写代码阶段使用标准的术语或者缩写的时候。

你一定会因使用了某种命名规则而受益，帮助你决定在一个特定项目中按照何种程序来制定规则里所使用的规则的范围。

### 正式程度

不同规则所要求的正式程度也有所不同，一个非正式的规则可能会像使用有意义的名字这样简单。

你所需的正式程序取决于为同一程序而工作的人员数量，程序的规模，以及程序预期的声明周期。

## 非正式命名规则

### 与语言无关的命名规则的指导原则

区分变量名和子程序名字，要求变量名和对象名以小写字母开始，子程序名字以大写字母开始。

区分类和对象，区分类名字与对象名字。

标识全局变量，有一种编程问题很常见，那就是滥用全局变量。

标识成员变量，要根据名字识别出变量是类的数据成员。

标识类型声明，为类型建立命名规则有两个好处，能够明确表明一个名字是类型名，其次能够避免类型名与变量名冲突。

标识具名常量，需要对具名常量加以标识，以便明确在为一个变量赋值时你用的是另一个变量的值，还是一个具名常量。

标识枚举类型的元素，枚举类型的元素也需要加以标识。

在不能保证输入参数只读的语言里标识只读参数，有时输入参数会被意外修改。

格式化命名以提高可读性，两种常用方法可以提高可读性，那就是用大小写和分隔符来分隔单词。

### 命名规则示例

变量名包含以下三类信息：

1、变量的内容，它代表什么

2、数据的种类，具名常量，简单变量，用户自定义类型或者类

3、变量的作用域，私用的，类的，或者全局的作用域

## 标准前缀

对具有通用含义的前缀标准化，为数据命名提供了一种简洁的，一致并且可读性好的方法。

标准化的前缀由两部分组成，用户自定义类型UDT的缩写和语义前缀。

### 用户自定义类型缩写

UDT缩写可以表示被命名对象或变量的数据类型。UDT缩写不会表示任何由编程语言所提供的预置数据类型。

UDT用很短的编码描述，这些编码视为特定的程序创建的，并且经过标准化以在该程序内使用。

### 语义前缀

语义前缀比UDT更进一步，它描述了变量或者对象是如何使用的。语义前缀与UDT不同，后者会根据项目的不同而不同，而前者在某种程序上对于不同的项目均是标准的。

### 标准前缀的优点

除了具备命名规则所能提供的一般意义的优点外，标准前缀还为你带来了另外一些好处，由于很多名字都已经标准化了，因此你在一个程序或者类内需要记忆的名字更少了。

标准前缀能够更为精确地描述一些含义比较模糊的名字。

标准化的前缀使名字变得更加紧凑。

缺陷是程序员在使用前缀的同时忽略给变量其有意义的名字。

## 创建具备可读性的短名字

### 缩写的一般指导原则

使用标准的缩写；去掉所有非前置原音；去掉虚词and，or，the；使用每个单词的第一个或前几个字母；统一地在每个单词的第一，第二或第三个字母后截断；保留每个单词的第一个和最后一个字母；使用名字中的每一个重要单词，最多不要超过三个；去掉无用的后缀；保留每个音节中最引人注意的发音；确保不要改变变量的含义。反复使用上述技术，指导每个变量名的长度缩减到了8到20个字符串。

### 语音缩写

有些人倡导基于单词的发音而不是拼写类创建缩写。

### 有关缩写的评论

不要从每个单词中删除一个字符的方式来缩写，丧失可读性。

缩写要一致，一直使用相同的缩写。

创建你能读出来的名字，更清晰的名字。

避免使用容易看错或者读错的字符组合。

使用词典类解决命名冲突，使用含义相同的不同单词。

在代码里用缩写对照表解释极短的名字的含义。

在一份项目级的标准缩写文档中说明所有的缩写。

记住，名字对于代码读者的意义要比对作者更重要。

## 应该避免的名字

避免使用令人误解的名字或缩写。

避免使用具有相似含义的名字。

避免使用具有不同含义但却有相似名字的变量。

避免使用发音相近的名字。

避免在名字中使用数字。

避免在名字中拼错单词。

避免使用英语中常常拼错的单词。

不要仅靠大小写来区分变量名。

避免使用多种自然语言。

避免使用标准类型，变量和子程序的名字。

不要使用与变量含义完全无关的名字。

避免在名字中包含易混淆的字符。

## 要点

好的变量名是提高程序可读性的一项关键要素。对特殊种类的变量，比如循环下标和状态变量，需要加以特殊的考虑。

名字要尽可能地具体，那些太模糊或者太通用以致于能够用于多种目的的名字通常都是不好的。

命名规则应该能够区分局部数据，类数据和全局数据，应该可以区分类型名，具名常量，枚举类型名字和变量名。

无论做哪种类型项目，你都应该采用某种变量命名规则，你所采用的规则的种类取决于你的程序的规模，以及项目成员的人数。

现代编程语言很少需要用到缩写，如果你真的要使用缩写，请使用项目缩写词典或者标准前缀来帮助理解缩写。

代码阅读的次数远远多于编写的次数，确保你所取的名字更侧重于阅读方便而不是编写方便。





