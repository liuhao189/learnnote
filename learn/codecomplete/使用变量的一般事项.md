# 使用变量的一般事项

## 数据认知

创建有效数据的第一步是了解所要创建数据的种类，积累大量的数据类型对于程序员来说是至关重要的。

## 轻松掌握变量定义

如何加快变量定义的工作。事实上，这是一个很简单的任务。创建变量的确占去你很多时间，养成一个良好的习惯会为你在整个项目周期内省去很多时间和麻烦。

### 隐式声明

有些语言支持隐式变量声明，使用一个未声明的变量的时候，编译器会自动为你声明该变量。

语言不要求对变量预先声明，很容易犯变量混淆这一类错误。

关闭隐式声明，声明全部的变量，遵循某种命名规则，检查变量名，使用编译器或第三方工具生成的交叉引用列表。

## 变量初始化原则

不合理地初始化数据是产生编程错误的常见根源之一。不恰当的变量初始化所导致的一系列问题的根源是变量的默认初始值与你的预期不同。

从未对变量赋值，变量值已过期，变量的一部分被赋值。

建议：

1、在声明变量的时候初始化，声明的同时对其初始化是一种非常方便的防御式编程方法。

2、在靠近变量第一次使用的位置初始化它，就近原则，注释靠近它所描述的代码，让控制循环的代码靠近循环本身。

3、理想情况下，在靠近第一次使用变量的位置声明和定义该变量。声明指定了变量的类型，定义为变量指定特定的取值。

4、可能的情况下使用final或const，防止该变量在初始化之后再赋值。定义类常量，输入参数以及任何初始化后其值不再发生改变的局部变量时非常有用。

5、特别注意计数器和累加器。i，j，k，sum和total等变量常用做计数器或累加器。下一次使用这些变量之前忘记重置其值也是一种常见错误。

6、在类的构造函数里初始化该类的数据成员。类的数据也应该在其构造函数中初始化，构造函数里分配了内存，应该在析构函数中释放这些内存。

7、检查是否需要重新初始化，变量是否需要重新初始化，由于子程序内的某个循环需要多次使用该变量，该变量会在多次子程序调用之间维持其值。

8、一次性初始化具名常量，用可执行代码来初始化变量。

9、使用编译器设置来自动初始化所有变量。编译器支持自动初始化所有变量的选项，可以打开，这是一种靠编译器完成初始化工作的简单方式。

10、利用编译器警告信息。

11、检查输入参数的合法性，输入数值赋给任何对象之前，确保这些数值是合理的。

12、使用内存访问检查工具来检查错误的指针。

13、在程序开始时初始化工作内存，把工作内存初始化为一个已知数值将会有助于发现初始化错误。

## 作用域

作用域可以看做是一种衡量变量的知名度的方法。作用域或可见性指的是变量在程序内的可见和可引用的范围。

1、使变量引用局部化，把对一个变量的引用局部化，即把引用点尽可能集中在一起总是一种很好的做法。衡量一个变量的不同引用点的靠近程序的一种方法是计算该变量的跨度。提高程序的可读性。

2、尽可能缩短变量的存活时间，一个变量存在期间所跨越的语句总是，开始于引用它的第一条语句，结束于引用它的最后一条语句。测量变量的生成时间：可以计算某一变量最初引用点和最后引用点之间的代码行数，以此将生存事件这一概念形式化。

3、减小作用域的一般原则。在循环开始之前再去初始化该循环里使用的变量；直到变量即将被使用时再为其赋值；把相关语句放在一起；把相关语句组提取成单独的子程序；开始时采用最严格的可见性，然后根据需要扩展变量的作用域。

### 有关缩小变量作用域的说明

程序员采用哪种缩小变量作用域的方法，取决于他如何看待“方便性”和“智力上的可管理性”。有的程序员把很多变量定义为全局，看重任意时间任意地点访问变量所带来的便捷，而不是由此而带来的风险。其它程序员更愿意尽可能地使用变量局部化，有助于提高智力上的可管理性。你能够隐藏的信息越多，在同一时间所需要考虑的信息就越少。

“方便性”和“智力可管理性”两种理念之间的区别，归根结底来源于侧重写程序还是读程序之间的区别。

## 持续性

持续性是对一项数据的生命期的另一种描述。持续性具有多种形态。

1、特定代码段或子程序的生命期。局部变量。

2、只要你允许，它就会持续下去。new创建的变量。

3、程序的生命期，全局变量。

4、永远持续，存储在数据库中，多次执行之间存留的数据。

在程序中加入调试代码或者断言来检查那些关键变量的合理取值；准备抛弃变量时给它们赋上不合理的数值，eg，null；编写代码时要假设数据并没有持续性；养成在使用所有数据之前声明和初始化的习惯。

## 绑定时间

绑定时间，把变量和它的值绑定在一起的事件，这一绑定是发生在编写代码的时候还是在编译程序时，在程序加载的时还是运行。采用越晚的绑定时间会越有利。

运行期绑定代码更具有可读性和灵活性，无须通过修改程序来改变，只需简单修改要读取的数据源文件即可。

编码时；编译时；加载时，对象实例化时；即时。绑定的时间越早灵活性就会越差，复杂度也会越低。

