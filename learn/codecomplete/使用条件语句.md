# 使用条件语句

条件语句用来控制其它语句是否执行，其它语句在if、else、case、switch等语句里时变为有条件地执行。

## if语句

### if-else语句

首先写正常代码路径，再处理不常见情况。编写代码的时候，要使得正常情况的执行路径在代码中是清晰的。

确保对于等量的分支是正确的。不用用>代替>=，或用<代替<=，条件语句中，仔细考虑条件是否同实际情况相符合，避免犯错误。

把正常情况的处理放在if后面而不用放在else后面。

让if子句后面跟随一个有意义的语句。

考虑else语句，空else表明考虑到相应的情况，除非其原因显而易见，否则请用注释来解释为什么在这里else子句是没有必要的。

测试else子句的正确性，测试if和else分支。

检查if和else子句是不是弄反了。if测试的逻辑弄反了，本应放在if子句后面的代码和本应放在else子句后面的代码给弄反了。

### if-elseif-else

利用布尔函数调用简化复杂的检测。

把最常见的情况放在最前面。阅读代码的人为找出正常情况的处理代码而必须要读的处理的代码变得最少，同时，所需的判断减到最少，代码效率也得到了提高。

确保所有的情况都考虑到了，写一个最后的else，用出错消息或断言来捕捉那些你不考虑的情况。

如果你的语言支持，请把if-then-else语句串替换成其他结构。少数语言支持字符串，枚举和逻辑函数的case语句。

## case语句

case语句或者switch语句随着编程语言的不同有着很大的差异。

### 为case选择最有效的排列顺序

按字母顺序或数字顺序排列各种情况，提高可读性。case量多的时候。

把正常的情况放在前面，一个正常的情况和多个异常情况。正常的case放前面。

按执行频率排列case子句，最经常执行的情况放在最前面。执行频率最高的case放前面。

### 使用case语句的诀窍

简化每种情况对应的操作，简短的情况处理代码会使case语句的结构更加清晰。如果执行的操作非常复杂，那么就写一个子程序。

不要为了使用case语句而刻意制造一个变量，case语句应该用于处理简单的，容易分类的数据。你的数据并不简单，那么就使用if-then-else语句串。

把default子句只用于检查真正的默认情况，只剩下一种情况需要处理，于是就决定把这种情况编写为default子句。失去case语句的标号所提供的自动说明功能，而且也丧失了使用default子句检测错误的能力。

利用default子句来检测错误，默认子句既没有用来做其它处理，按照正常执行顺序也不太可能会发生，向里面加入一条诊断消息。

避免代码执行越过一条case子句的末尾，必须明确地为每一case子句写结束语句break语句。如果要穿越，在case末尾明确无误地表明需要穿越执行的程序流程。

## 要点

对于简单的if-else语句，请注意if子句和else子句的顺序，特别是用它来处理大量错误的时候，要确认正常的情况是清晰的。

对于if-then-else语句串和case语句，选择一种最有利于阅读的排序。

为了捕捉错误，可以使用case语句中的default子句，或者使用if-then-else语句串中的最后那个else子句。

各种控制结构并不是生来平等的，请为代码的每个部分选用最合适的控制结构。



