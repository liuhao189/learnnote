<!DOCTYPE html>
<!-- saved from url=(0022)http://localhost:7823/ -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Echarts</title>
    <script src="./Echarts_files/echarts.js"></script>
</head>

<body>
    <style>
        section {
            margin-bottom: 20px;
        }
    </style>
    <section>
        <div class="container" style="width: 600px; height: 400px; -webkit-tap-highlight-color: transparent; user-select: none; position: relative;" _echarts_instance_="ec_1555776793605"><div style="position: relative; overflow: hidden; width: 600px; height: 400px; padding: 0px; margin: 0px; border-width: 0px;"><canvas data-zr-dom-id="zr_0" width="1200" height="800" style="position: absolute; left: 0px; top: 0px; width: 600px; height: 400px; user-select: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); padding: 0px; margin: 0px; border-width: 0px;"></canvas></div><div></div></div>
    </section>
    
    <script>
        function getRandomNum() {
            return Math.floor(300 + Math.random() * 100);
        }
        let sourceData = [['仓库', "总库存", "剩余库存"]];
        for (let i = 0; i < 20; ++i) {
            sourceData.push(['北京仓' + i, getRandomNum(), getRandomNum()]);
        }
        let myChart = echarts.init(document.querySelector('.container'));
        let option = {
            title: { text: '全国仓库概览', left: 'center' },
            tooltip: {},
            legend: {
                bottom: 30
            },
            grid: [{
                bottom: 80
            }],
            dataZoom: [{
                type: 'slider',
                startValue: 0,
                endValue: 5,
                zoomLock: true,
                borderColor: 'none',
                showDetail: false,
                dataBackground: {
                    lineStyle: {
                        color: '#ffffff'
                    },
                    areaStyle: {
                        color: '#fff'
                    }
                },
                bottom: -20,
                handleStyle: {
                    borderType: 'dashed',
                    borderWidth: '20',
                    color: 'rgba(47,69,84,0)',
                    borderWidth: 0,
                    borderColor: 'rgba(47,69,84,0)'
                }
            }],
            xAxis: { type: 'category' },
            yAxis: { type: 'value' },
            dataset: {
                source: sourceData
            },
            series: [{ type: 'bar' }, { type: 'bar' }]
        };
        myChart.setOption(option);
    </script>
    <section>
        <div id="evCharts" style="width: 600px; height: 600px; -webkit-tap-highlight-color: transparent; user-select: none; position: relative;" _echarts_instance_="ec_1555776793606"><div style="position: relative; overflow: hidden; width: 600px; height: 600px; padding: 0px; margin: 0px; border-width: 0px;"><canvas data-zr-dom-id="zr_0" width="1200" height="1200" style="position: absolute; left: 0px; top: 0px; width: 600px; height: 600px; user-select: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); padding: 0px; margin: 0px; border-width: 0px;"></canvas></div><div></div></div>
        <script>
            let sources = [['年龄', '收入']];
            for (let i = 0; i < 10; ++i) {
                sources.push([22 + i, Math.floor(20000 + i * 1000 + Math.random() * 100)]);
            }
            let evCharts = echarts.init(document.querySelector('#evCharts'));
            let evOption = {
                dataset: {
                    source: sources
                },
                xAxis: { type: 'category' },
                yAxis: {},
                tooltip: {},
                series: [{ type: 'bar' }]
            };
            evCharts.setOption(evOption);
            //
            evCharts.on('click', { dataIndex: 9 }, (params) => {
                window.open('https://cn.bing.com/search?q=' + params.name)
            });
        </script>
    </section>
    <section>
        <div id="dragChart" style="width: 600px; height: 400px; -webkit-tap-highlight-color: transparent; user-select: none; position: relative;" _echarts_instance_="ec_1555776793607"><div style="position: relative; overflow: hidden; width: 600px; height: 400px; padding: 0px; margin: 0px; border-width: 0px; cursor: default;"><canvas data-zr-dom-id="zr_0" width="1200" height="800" style="position: absolute; left: 0px; top: 0px; width: 600px; height: 400px; user-select: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); padding: 0px; margin: 0px; border-width: 0px;"></canvas></div><div style="position: absolute; display: none; border-style: solid; white-space: nowrap; z-index: 9999999; transition: left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s; background-color: rgba(50, 50, 50, 0.7); border-width: 0px; border-color: rgb(51, 51, 51); border-radius: 4px; color: rgb(255, 255, 255); font: 14px/21px sans-serif; padding: 5px; left: 213.333px; top: 235.556px; pointer-events: none;">X:-50.00<br>Y:10.00</div></div>
        <script>
            let dragChart = echarts.init(document.querySelector('#dragChart'));
            let symbolSize = 20;
            let data = [[15, 0], [-50, 10], [-56.5, 20], [-46.5, 30], [-22.1, 40]];
            let drageOption = {
                tooltip: {
                    triggerOn: 'none',
                    formatter: function (params) {
                        let { data } = params;
                        let [x, y] = data;
                        let fixedNum = 2;
                        return `X:${x.toFixed(fixedNum)}<br/>Y:${y.toFixed(fixedNum)}`
                    }
                },
                xAxis: {
                    min: -100,
                    max: 80,
                    type: 'value',
                    axisLine: { onZero: false }
                },
                yAxis: {
                    min: -30,
                    max: 60,
                    type: 'value',
                    axisLine: { onZero: false }
                },
                series: [{
                    id: 'a',
                    type: "line",
                    smooth: true,
                    symbolSize: symbolSize,
                    data: data
                }]
            };
            dragChart.setOption(drageOption);
            dragChart.setOption({
                graphic: echarts.util.map(data, function (item, inx) {
                    return {
                        type: 'circle',
                        shape: {
                            r: symbolSize / 2
                        },
                        onmousemove: echarts.util.curry(showTooltip, inx),
                        onmouseout: echarts.util.curry(hideTooltip, inx),
                        position: dragChart.convertToPixel('grid', item),
                        invisible: true,
                        draggable: true,
                        z: 100,
                        ondrag: echarts.util.curry(onPointDragging, inx)
                    }
                })
            });

            function hideTooltip(inx) {
                dragChart.dispatchAction({
                    type: 'hideTip',
                    seriesIndex: 0,
                    dataIndex: inx
                })
            }

            function showTooltip(inx) {
                dragChart.dispatchAction({
                    type: 'showTip',
                    seriesIndex: 0,
                    dataIndex: inx
                })
            }

            function onPointDragging(dataIndex) {
                data[dataIndex] = dragChart.convertFromPixel('grid', this.position);
                dragChart.setOption({
                    series: [{
                        id: 'a',
                        data: data
                    }]
                });
            }
            window.addEventListener('resize', function () {
                myChart.setOption({
                    graphic: echarts.util.map(data, function (item, dataIndex) {
                        return {
                            position: dragChart.convertToPixel('grid', item)
                        }
                    })
                });
            });
        </script>
    </section>
    <section>
        <div id="calendarChart" style="width: 100%; height: 400px; -webkit-tap-highlight-color: transparent; user-select: none;" _echarts_instance_="ec_1555776793608"><div style="position: relative; overflow: hidden; width: 1409px; height: 400px; padding: 0px; margin: 0px; border-width: 0px; cursor: default;"><canvas data-zr-dom-id="zr_0" width="2818" height="800" style="position: absolute; left: 0px; top: 0px; width: 1409px; height: 400px; user-select: none; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); padding: 0px; margin: 0px; border-width: 0px;"></canvas></div></div>
        <script>
            let calendarChart = echarts.init(document.querySelector('#calendarChart'));
            //
            function getVirtulData(year) {
                year = year || '2017';
                let date = echarts.number.parseDate(year + '-01-01').valueOf();
                let end = echarts.number.parseDate(year + '-12-31').valueOf();
                let dayTime = 3600 * 24 * 1000;
                let data = [];
                for (let time = date; time <= end; time += dayTime) {
                    data.push([
                        echarts.format.formatTime('yyyy-MM-dd', time),
                        Math.floor(Math.random() * 10000)
                    ]);
                }
                return data;
            }
            //
            let calendarOption = {
                visualMap: {
                    show: false,
                    min: 0,
                    max: 1000
                },
                calendar: {
                    range: '2017',
                    cellSize: 20,
                    orient: 'vertical',
                    width: 1000,
                    height: 280,
                    splitLine: {
                        show: false,
                        width: 5,
                        type: 'dashed'
                    }
                },
                series: [{
                    type: 'heatmap',
                    coordinateSystem: 'calendar',
                    data: getVirtulData(2017)
                }]
            };
            calendarChart.setOption(calendarOption);
        </script>
    </section>


</body></html>