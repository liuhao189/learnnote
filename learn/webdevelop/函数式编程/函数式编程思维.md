# 前言

函数式编程与命令式编程最大的不同其实在于：函数式编程关心数据的映射，命令式编程关心解决问题的步骤。

    映射就是数学上函数的概念，一种事物和另一种事物之间的对应关系。

这也是为什么函数式编程叫做函数式编程的原因。

# 二叉树翻转例子

首先判断节点是否为空，然后翻转左树，然后翻转右树，最后左右互换。

这就是命令式编程，你要做什么事情，你得把达到目的的步骤详细的描述出来，然后交给机器去运行。

通过描述一个旧树->新树的映射，而不是描述从旧树得到新树应该怎么做来达到目的。

## 好处

直观的角度，函数式风格的代码可以写得很精简，大大减少了键盘的损耗。

函数式的代码是对映射的描述，不仅可以描述数据结构之间的对应关系，任何能在计算机中体现的事物之间的对应关系都可以描述。它的抽象程度可以很高，意味着函数式的代码可以更方便的复用。

# 另外一篇

函数式编程关心类型之间的关系，命令式编程关心解决问题的步骤。

函数式编程中的lambda可以看成是两个类型之间的关系，一个输入类型和一个输出类型。

lambda演算就是给lambda表达式一个输入类型的值，则可以得到一个输出类型的值，这是一个计算，计算过程满足lambda等价和lambda规约

函数式编程的思维就是如何将这个关系组合起来，用数学的构造主义将其构造出你设计的程序。

# 另外一篇

函数式编程是一种编程范式，常见的编程范式有命令式编程，函数式编程，逻辑式编程。常见的面向对象编程也是一种命令式编程。

命令式编程是面向计算机硬件的抽象，有变量，赋值语句，表达式和控制语句。命令式程序就是一个冯诺依曼机的指令序列。

函数式编程是面向数学的抽象，将计算描述为一种表达式求值。函数式程序就是一个表达式。

## 函数式编程的本质

函数式编程中的函数这个术语不是指计算机中的函数，而是指数学中的函数。一个函数的返回值仅取决于函数参数的值，不依赖其它状态。

函数式语言中，函数作为一等公民，可以在任何地方定义，可以对函数进行组合。

函数式编程语言中的变量是代数中的变量，即一个值的名称，变量的值是不可变的。

函数式语言条件语句循环语句是函数的语法糖。

严格意义上的函数式编程意味着不使用可变的变量，赋值，循环和其他命令式控制结构进行编程。

从理论上说，函数式语言也不是通过冯诺依曼体系结构的机器上运行的，而是通过lambda演算来运行的。

## 函数式编程的好处

命令式编程语言可以通过类似函数指针的方式来实现高阶函数，函数式的最主要的好处主要是不可变性带来的。引用透明和没有副作用。

一个好处是，函数即不依赖外部的状态也不修改外部的状态，函数调用的结果不依赖调用的时间和位置，这样写的代码容易进行推理，不容易出错。这使得单元测试和调试都更容易。

不变性带来的另一个好处是：由于（多个线程之间）不共享状态，不会造成资源争用(Race condition)，也就不需要用锁来保护可变状态，也就不会出现死锁，这样可以更好地并发起来，尤其是在对称多处理器（SMP）架构下能够更好地利用多个处理器（核）提供的并行处理能力。

还有一个好处是，由于函数式语言是面向数学的抽象，更接近人的语言，而不是机器语言，代码会比较简洁，也更容易被理解。

## 函数编程的特性

### 变量值是不可变的

对于值的操作并不是修改原来的值，而是修改新产生的值，原来的值保持不变。

由于变量不可变，纯函数编程语言无法实现循环，因为For循环使用可变的状态作为计数器。while循环和doWhile需要可变的状态作为跳出循环的条件。

函数式语言中只能使用递归来解决迭代问题。

```class
class Point{
    constroctor(x,y){
        this.x = x;
        this.y = y;
    }

    moveBy(dx,dy){
       return new Point(this.x+dx,this.y+dy)
    }
}
```

算法都有递推和递归两者定义。

递推定义的计算时需要使用一个累积器保存每个迭代的中间计算结果。尽量把递归写成尾递归的方式，编译器会自动优化为循环。

### 高阶函数

高阶函数是参数为函数或返回值为函数的函数，有了高阶函数，就可以将复用的力度降低到函数级别。复用的力度更低，相比面向对象语言。

高阶函数提供一种函数级别的算子的抽象。

函数式语言通常提供非常强大的集合类，提供很多高阶函数，因此使用非常方便。

```js
    {
        function sumInts(a, b) {
            if (a > b) return 0;
            return a + sumInts(a + 1, b);
        }

        function sumCubes(a, b) {
            if (a > b) return 0;
            return Math.pow(a, 3) + sumCubes(a + 1, b);
        }

        function fact(n) {
            if (n === 0) return 1;
            return fact(n - 1) * n;
        }

        function sumFact(a, b) {
            if (a > b) return 0;
            return fact(a) + sumFact(a + 1, b);
        }

        function sumFns(fn, a, b) {
            if (a > b) return 0;
            return fn(a) + fn(a + 1, b)
        }
    }
    {
        let list = [1, 2, 3, 4];

        let newList = list.map((x) => x * 2);

        console.log(newList)
    }

     {
        let arr = new Array(1, 2, 3, 4, 5, 6, 7, 8, 9, 10);
        let newArr = arr.map((x, inx) => { return inx + 1; });
        let init = 1;
        let res = newArr.reduce((prevRes, val, inx) => {
            return prevRes * val;
        }, init)
    }
```

集合中的每一项乘2，函数式编程关注做什么，而不关注怎么做，列表的元素是从前到后一次计算的，还是从后到前一次计算的，是顺序计算的，还是并行进行的计算。

### 惰性求值&&组合

表达式赋值给变量时并不计算表达式的值，而在变量第一次被使用时才进行计算。

在函数式编程语言中可以定义代数数据类型，通过组合已有的数据类型形成新的数据类型。

## 总结

函数式编程是给软件开发者提供的另一套工具箱，为我们提供了另外一种抽象和思考的方式。






